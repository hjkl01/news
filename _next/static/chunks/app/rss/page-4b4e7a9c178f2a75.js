(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{5880:function(e,t,a){Promise.resolve().then(a.bind(a,4179))},4179:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(7437),l=a(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let h=(0,l.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:h,iconNode:x,...m}=e;return(0,l.createElement)("svg",{ref:t,...d,width:s,height:s,stroke:a,strokeWidth:n?24*Number(r)/Number(s):r,className:c("lucide",i),...!h&&!o(m)&&{"aria-hidden":"true"},...m},[...x.map(e=>{let[t,a]=e;return(0,l.createElement)(t,a)}),...Array.isArray(h)?h:[h]])}),x=(e,t)=>{let a=(0,l.forwardRef)((a,s)=>{let{className:n,...o}=a;return(0,l.createElement)(h,{ref:s,iconNode:t,className:c("lucide-".concat(r(i(e))),"lucide-".concat(e),n),...o})});return a.displayName=i(e),a},m=x("rss",[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]]),u=x("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),p=x("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),f=x("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),g=x("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),y=x("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),j=x("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),v=x("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),w=x("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function b(){let[e,t]=(0,l.useState)({}),[a,r]=(0,l.useState)([]),[n,i]=(0,l.useState)(null),[c,o]=(0,l.useState)(!1),[d,h]=(0,l.useState)(null),[x,b]=(0,l.useState)(new Set),[N,k]=(0,l.useState)(null),C=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1","#14B8A6","#F43F5E"];(0,l.useEffect)(()=>{S()},[]);let S=async()=>{o(!0),h(null);try{let e=await fetch("/rss-feeds.json");if(!e.ok)throw Error("无法加载RSS配置文件");let t=await e.json();k(t);let a=new Map,s=0;t.feeds.forEach(e=>{!a.has(e.category)&&(a.set(e.category,{id:e.category.toLowerCase().replace(/\s+/g,"-"),name:e.category,color:C[s%C.length],count:0}),s++)}),r(Array.from(a.values()))}catch(e){h(e instanceof Error?e.message:"加载RSS内容时发生错误")}finally{o(!1)}},E=async e=>{if(N){o(!0),h(null);try{let s=a.find(t=>t.id===e);if(!s)throw Error("分类不存在");let l=N.feeds.filter(t=>t.category.toLowerCase().replace(/\s+/g,"-")===e),r=l.map(e=>M(e,s)),n=await Promise.allSettled(r),i=[];n.forEach((e,t)=>{"fulfilled"===e.status&&e.value?i.push(...e.value):console.warn("Failed to load feed: ".concat(l[t].name),e)}),i.sort((e,t)=>t.pubDate.getTime()-e.pubDate.getTime()),t(t=>({...t,[e]:i}));let c=new Set(i.map(e=>e.feedName));b(c)}catch(e){h(e instanceof Error?e.message:"加载RSS内容时发生错误")}finally{o(!1)}}},M=async(e,t)=>{try{let a="https://api.rss2json.com/v1/api.json?rss_url=".concat(encodeURIComponent(e.url)),s=await fetch(a),l=await s.json();if("ok"===l.status&&l.items)return l.items.map((a,s)=>{var r,n;return{id:"".concat(e.title||e.name,"-").concat(Date.now(),"-").concat(s),title:a.title||"无标题",description:a.description||a.content||"无描述",link:a.link||"#",pubDate:new Date(a.pubDate||Date.now()),category:t,source:(null===(r=l.feed)||void 0===r?void 0:r.title)||e.title||e.name,author:a.author||(null===(n=l.feed)||void 0===n?void 0:n.title)||e.title||e.name,feedName:e.title||e.name}});return null}catch(t){return console.error("Error fetching RSS feed ".concat(e.name,":"),t),null}},A=async t=>{if(i(t),null===t){let t=a.map(e=>e.id).filter(t=>!e[t]);if(t.length>0)for(let e of t)await E(e)}else e[t]?b(new Set(e[t].map(e=>e.feedName))):await E(t)},D=async()=>{if(t({}),null===n)for(let e of a)await E(e.id);else n&&await E(n)},F=[];null===n?F=Object.values(e).flat():n&&(F=e[n]||[]);let L=F.reduce((e,t)=>(e[t.feedName]||(e[t.feedName]=[]),e[t.feedName].push(t),e),{}),R=e=>{let t=new Set(x);t.has(e)?t.delete(e):t.add(e),b(t)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-2 rounded-lg",children:(0,s.jsx)(m,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"RSS订阅阅读器"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("button",{onClick:()=>{let e=Object.keys(L);x.size===e.length?b(new Set):b(new Set(e))},className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg flex items-center space-x-2 transition-all duration-200",children:(0,s.jsx)("span",{children:x.size===Object.keys(L).length?"收起全部":"展开全部"})}),(0,s.jsxs)("button",{onClick:D,disabled:c,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-all duration-200 transform hover:scale-105",children:[(0,s.jsx)(u,{className:"w-4 h-4 ".concat(c?"animate-spin":"")}),(0,s.jsx)("span",{children:"刷新内容"})]})]})]})})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 sticky top-8",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,s.jsx)(p,{className:"w-5 h-5 mr-2 text-blue-500"}),"分类"]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("button",{onClick:()=>A(null),className:"w-full text-left px-4 py-3 rounded-lg transition-all duration-200 flex items-center justify-between ".concat(null===n?"shadow-lg text-white bg-gradient-to-r from-blue-500 to-purple-600":"text-gray-700 hover:bg-gray-50"),children:[(0,s.jsx)("span",{className:"font-medium",children:"全部"}),(0,s.jsx)("span",{className:"text-sm px-2 py-1 rounded-full bg-white bg-opacity-20",children:Object.values(e).flat().length})]}),a.map(t=>{var a;return(0,s.jsxs)("button",{onClick:()=>A(t.id),className:"w-full text-left px-4 py-3 rounded-lg transition-all duration-200 flex items-center justify-between ".concat(n===t.id?"shadow-lg text-white":"text-gray-700 hover:bg-gray-50"),style:{backgroundColor:n===t.id?t.color:"transparent"},children:[(0,s.jsx)("span",{className:"font-medium",children:t.name}),(0,s.jsx)("span",{className:"text-sm px-2 py-1 rounded-full",style:{backgroundColor:n===t.id?"rgba(255, 255, 255, 0.2)":t.color+"20",color:n===t.id?"white":t.color},children:(null===(a=e[t.id])||void 0===a?void 0:a.length)||0})]},t.id)})]})]})}),(0,s.jsxs)("div",{className:"lg:col-span-3",children:[d&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 flex items-center space-x-3",children:[(0,s.jsx)(f,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-red-800 font-medium",children:"加载错误"}),(0,s.jsx)("p",{className:"text-red-600 text-sm",children:d})]})]}),c?(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"正在加载RSS内容..."})]}):(0,s.jsx)("div",{className:"space-y-6",children:0===Object.entries(L).length?(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[(0,s.jsx)(m,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"暂无RSS内容"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"该分类下暂无内容或加载失败"}),(0,s.jsx)("button",{onClick:D,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-6 py-3 rounded-lg transition-all duration-200 transform hover:scale-105",children:"重新加载"})]}):Object.entries(L).map(e=>{var t,a;let[l,r]=e,n=x.has(l),i=(null===(t=r[0])||void 0===t?void 0:t.category.color)||"#3B82F6";return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"px-6 py-4 cursor-pointer hover:bg-opacity-90 transition-all duration-200",style:{backgroundColor:i+"10"},onClick:()=>R(l),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold",style:{backgroundColor:i},children:l.charAt(0).toUpperCase()}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:l}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[r.length," 篇文章"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium text-white",style:{backgroundColor:i},children:null===(a=r[0])||void 0===a?void 0:a.category.name}),n?(0,s.jsx)(g,{className:"w-5 h-5 text-gray-500"}):(0,s.jsx)(y,{className:"w-5 h-5 text-gray-500"})]})]})}),n&&(0,s.jsx)("div",{className:"divide-y divide-gray-100",children:r.map(e=>(0,s.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors duration-200",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"w-2 h-16 rounded-full flex-shrink-0",style:{backgroundColor:i}}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,s.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-3",children:e.description.replace(/<[^>]*>/g,"")}),(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(j,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"truncate max-w-32",children:e.author})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(v,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:e.pubDate.toLocaleDateString("zh-CN")})]})]}),(0,s.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 font-medium transition-colors duration-200 hover:underline",style:{color:i},children:[(0,s.jsx)("span",{children:"阅读全文"}),(0,s.jsx)(w,{className:"w-4 h-4"})]})]})]})]})},e.id))})]},l)})})]})]})})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5880)}),_N_E=e.O()}]);